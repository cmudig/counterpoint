(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var br=Object.defineProperty;var yr=(r,t,e)=>t in r?br(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Pt=(r,t,e)=>(yr(r,typeof t!="symbol"?t+"":t,e),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function M(r,t){let e=r.length;Array.isArray(r[0])||(r=[r]),Array.isArray(t[0])||(t=t.map(n=>[n]));let i=t[0].length,a=t[0].map((n,o)=>t.map(l=>l[o])),s=r.map(n=>a.map(o=>{let l=0;if(!Array.isArray(n)){for(let h of o)l+=n*h;return l}for(let h=0;h<n.length;h++)l+=n[h]*(o[h]||0);return l}));return e===1&&(s=s[0]),i===1?s.map(n=>n[0]):s}function it(r){return O(r)==="string"}function O(r){return(Object.prototype.toString.call(r).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function _t(r,t){r=+r,t=+t;let e=(Math.floor(r)+"").length;if(t>e)return+r.toFixed(t-e);{let i=10**(e-t);return Math.round(r/i)*i}}function ze(r){if(!r)return;r=r.trim();const t=/^([a-z]+)\((.+?)\)$/i,e=/^-?[\d.]+$/;let i=r.match(t);if(i){let a=[];return i[2].replace(/\/?\s*([-\w.]+(?:%|deg)?)/g,(s,n)=>{/%$/.test(n)?(n=new Number(n.slice(0,-1)/100),n.type="<percentage>"):/deg$/.test(n)?(n=new Number(+n.slice(0,-3)),n.type="<angle>",n.unit="deg"):e.test(n)&&(n=new Number(n),n.type="<number>"),s.startsWith("/")&&(n=n instanceof Number?n:new Number(n),n.alpha=!0),a.push(n)}),{name:i[1].toLowerCase(),rawName:i[1],rawArgs:i[2],args:a}}}function Fe(r){return r[r.length-1]}function bt(r,t,e){return isNaN(r)?t:isNaN(t)?r:r+(t-r)*e}function Ye(r,t,e){return(e-r)/(t-r)}function Zt(r,t,e){return bt(t[0],t[1],Ye(r[0],r[1],e))}function Oe(r){return r.map(t=>t.split("|").map(e=>{e=e.trim();let i=e.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(i){let a=new String(i[1]);return a.range=[+i[2],+i[3]],a}return e}))}var Mr=Object.freeze({__proto__:null,interpolate:bt,interpolateInv:Ye,isString:it,last:Fe,mapRange:Zt,multiplyMatrices:M,parseCoordGrammar:Oe,parseFunction:ze,toPrecision:_t,type:O});class vr{add(t,e,i){if(typeof arguments[0]!="string"){for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1]);return}(Array.isArray(t)?t:[t]).forEach(function(a){this[a]=this[a]||[],e&&this[a][i?"unshift":"push"](e)},this)}run(t,e){this[t]=this[t]||[],this[t].forEach(function(i){i.call(e&&e.context?e.context:e,e)})}}const $=new vr;var z={gamut_mapping:"lch.c",precision:5,deltaE:"76"};const R={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function Ot(r){return Array.isArray(r)?r:R[r]}function yt(r,t,e,i={}){if(r=Ot(r),t=Ot(t),!r||!t)throw new TypeError(`Missing white point to convert ${r?"":"from"}${!r&&!t?"/":""}${t?"":"to"}`);if(r===t)return e;let a={W1:r,W2:t,XYZ:e,options:i};if($.run("chromatic-adaptation-start",a),a.M||(a.W1===R.D65&&a.W2===R.D50?a.M=[[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]]:a.W1===R.D50&&a.W2===R.D65&&(a.M=[[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]])),$.run("chromatic-adaptation-end",a),a.M)return M(a.M,a.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const wr=75e-6,S=class S{constructor(t){var a,s,n;this.id=t.id,this.name=t.name,this.base=t.base?S.get(t.base):null,this.aliases=t.aliases,this.base&&(this.fromBase=t.fromBase,this.toBase=t.toBase);let e=t.coords??this.base.coords;for(let o in e)"name"in e[o]||(e[o].name=o);this.coords=e;let i=t.white??this.base.white??"D65";this.white=Ot(i),this.formats=t.formats??{};for(let o in this.formats){let l=this.formats[o];l.type||(l.type="function"),l.name||(l.name=o)}t.cssId&&!((a=this.formats.functions)!=null&&a.color)?(this.formats.color={id:t.cssId},Object.defineProperty(this,"cssId",{value:t.cssId})):(s=this.formats)!=null&&s.color&&!((n=this.formats)!=null&&n.color.id)&&(this.formats.color.id=this.id),this.referred=t.referred,Object.defineProperty(this,"path",{value:kr(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),$.run("colorspace-init-end",this)}inGamut(t,{epsilon:e=wr}={}){if(this.isPolar)return t=this.toBase(t),this.base.inGamut(t,{epsilon:e});let i=Object.values(this.coords);return t.every((a,s)=>{let n=i[s];if(n.type!=="angle"&&n.range){if(Number.isNaN(a))return!0;let[o,l]=n.range;return(o===void 0||a>=o-e)&&(l===void 0||a<=l+e)}return!0})}get cssId(){var t,e;return((e=(t=this.formats.functions)==null?void 0:t.color)==null?void 0:e.id)||this.id}get isPolar(){for(let t in this.coords)if(this.coords[t].type==="angle")return!0;return!1}getFormat(t){if(typeof t=="object")return t=ae(t,this),t;let e;return t==="default"?e=Object.values(this.formats)[0]:e=this.formats[t],e?(e=ae(e,this),e):null}equals(t){return t?this===t||this.id===t.id:!1}to(t,e){if(arguments.length===1&&([t,e]=[t.space,t.coords]),t=S.get(t),this.equals(t))return e;e=e.map(o=>Number.isNaN(o)?0:o);let i=this.path,a=t.path,s,n;for(let o=0;o<i.length&&i[o].equals(a[o]);o++)s=i[o],n=o;if(!s)throw new Error(`Cannot convert between color spaces ${this} and ${t}: no connection space was found`);for(let o=i.length-1;o>n;o--)e=i[o].toBase(e);for(let o=n+1;o<a.length;o++)e=a[o].fromBase(e);return e}from(t,e){return arguments.length===1&&([t,e]=[t.space,t.coords]),t=S.get(t),t.to(this,e)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let t=[];for(let e in this.coords){let i=this.coords[e],a=i.range||i.refRange;t.push((a==null?void 0:a.min)??0)}return t}static get all(){return[...new Set(Object.values(S.registry))]}static register(t,e){if(arguments.length===1&&(e=arguments[0],t=e.id),e=this.get(e),this.registry[t]&&this.registry[t]!==e)throw new Error(`Duplicate color space registration: '${t}'`);if(this.registry[t]=e,arguments.length===1&&e.aliases)for(let i of e.aliases)this.register(i,e);return e}static get(t,...e){if(!t||t instanceof S)return t;if(O(t)==="string"){let a=S.registry[t.toLowerCase()];if(!a)throw new TypeError(`No color space found with id = "${t}"`);return a}if(e.length)return S.get(...e);throw new TypeError(`${t} is not a valid color space`)}static resolveCoord(t,e){var l;let i=O(t),a,s;if(i==="string"?t.includes(".")?[a,s]=t.split("."):[a,s]=[,t]:Array.isArray(t)?[a,s]=t:(a=t.space,s=t.coordId),a=S.get(a),a||(a=e),!a)throw new TypeError(`Cannot resolve coordinate reference ${t}: No color space specified and relative references are not allowed here`);if(i=O(s),i==="number"||i==="string"&&s>=0){let h=Object.entries(a.coords)[s];if(h)return{space:a,id:h[0],index:s,...h[1]}}a=S.get(a);let n=s.toLowerCase(),o=0;for(let h in a.coords){let u=a.coords[h];if(h.toLowerCase()===n||((l=u.name)==null?void 0:l.toLowerCase())===n)return{space:a,id:h,index:o,...u};o++}throw new TypeError(`No "${s}" coordinate found in ${a.name}. Its coordinates are: ${Object.keys(a.coords).join(", ")}`)}};Pt(S,"registry",{}),Pt(S,"DEFAULT_FORMAT",{type:"functions",name:"color"});let f=S;function kr(r){let t=[r];for(let e=r;e=e.base;)t.push(e);return t}function ae(r,{coords:t}={}){if(r.coords&&!r.coordGrammar){r.type||(r.type="function"),r.name||(r.name="color"),r.coordGrammar=Oe(r.coords);let e=Object.entries(t).map(([i,a],s)=>{let n=r.coordGrammar[s][0],o=a.range||a.refRange,l=n.range,h="";return n=="<percentage>"?(l=[0,100],h="%"):n=="<angle>"&&(h="deg"),{fromRange:o,toRange:l,suffix:h}});r.serializeCoords=(i,a)=>i.map((s,n)=>{let{fromRange:o,toRange:l,suffix:h}=e[n];return o&&l&&(s=Zt(o,l,s)),s=_t(s,a),h&&(s+=h),s})}return r}var L=new f({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class k extends f{constructor(t){t.coords||(t.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),t.base||(t.base=L),t.toXYZ_M&&t.fromXYZ_M&&(t.toBase??(t.toBase=e=>{let i=M(t.toXYZ_M,e);return this.white!==this.base.white&&(i=yt(this.white,this.base.white,i)),i}),t.fromBase??(t.fromBase=e=>(e=yt(this.base.white,this.white,e),M(t.fromXYZ_M,e)))),t.referred??(t.referred="display"),super(t)}}function $e(r,{meta:t}={}){var i,a,s,n,o;let e={str:(i=String(r))==null?void 0:i.trim()};if($.run("parse-start",e),e.color)return e.color;if(e.parsed=ze(e.str),e.parsed){let l=e.parsed.name;if(l==="color"){let h=e.parsed.args.shift(),u=e.parsed.rawArgs.indexOf("/")>0?e.parsed.args.pop():1;for(let d of f.all){let m=d.getFormat("color");if(m&&(h===m.id||(a=m.ids)!=null&&a.includes(h))){const p=Object.keys(d.coords).map((b,y)=>e.parsed.args[y]||0);return t&&(t.formatId="color"),{spaceId:d.id,coords:p,alpha:u}}}let c="";if(h in f.registry){let d=(o=(n=(s=f.registry[h].formats)==null?void 0:s.functions)==null?void 0:n.color)==null?void 0:o.id;d&&(c=`Did you mean color(${d})?`)}throw new TypeError(`Cannot parse color(${h}). `+(c||"Missing a plugin?"))}else for(let h of f.all){let u=h.getFormat(l);if(u&&u.type==="function"){let c=1;(u.lastAlpha||Fe(e.parsed.args).alpha)&&(c=e.parsed.args.pop());let d=e.parsed.args,m;return u.coordGrammar&&(m=Object.entries(h.coords).map(([p,b],y)=>{var q;let v=u.coordGrammar[y],w=(q=d[y])==null?void 0:q.type,A=v.find(Y=>Y==w);if(!A){let Y=b.name||p;throw new TypeError(`${w} not allowed for ${Y} in ${l}()`)}let x=A.range;w==="<percentage>"&&(x||(x=[0,1]));let D=b.range||b.refRange;return x&&D&&(d[y]=Zt(x,D,d[y])),A})),t&&Object.assign(t,{formatId:u.name,types:m}),{spaceId:h.id,coords:d,alpha:c}}}}else for(let l of f.all)for(let h in l.formats){let u=l.formats[h];if(u.type!=="custom"||u.test&&!u.test(e.str))continue;let c=u.parse(e.str);if(c)return c.alpha??(c.alpha=1),t&&(t.formatId=h),c}throw new TypeError(`Could not parse ${r} as a color. Missing a plugin?`)}function g(r){if(!r)throw new TypeError("Empty color reference");it(r)&&(r=$e(r));let t=r.space||r.spaceId;return t instanceof f||(r.space=f.get(t)),r.alpha===void 0&&(r.alpha=1),r}function at(r,t){return t=f.get(t),t.from(r)}function P(r,t){let{space:e,index:i}=f.resolveCoord(t,r.space);return at(r,e)[i]}function Xe(r,t,e){return t=f.get(t),r.coords=t.to(r.space,e),r}function X(r,t,e){if(r=g(r),arguments.length===2&&O(arguments[1])==="object"){let i=arguments[1];for(let a in i)X(r,a,i[a])}else{typeof e=="function"&&(e=e(P(r,t)));let{space:i,index:a}=f.resolveCoord(t,r.space),s=at(r,i);s[a]=e,Xe(r,i,s)}return r}var Ut=new f({id:"xyz-d50",name:"XYZ D50",white:"D50",base:L,fromBase:r=>yt(L.white,"D50",r),toBase:r=>yt("D50",L.white,r),formats:{color:{}}});const xr=216/24389,se=24/116,ot=24389/27;let Dt=R.D50;var C=new f({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Dt,base:Ut,fromBase(r){let e=r.map((i,a)=>i/Dt[a]).map(i=>i>xr?Math.cbrt(i):(ot*i+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(r){let t=[];return t[1]=(r[0]+16)/116,t[0]=r[1]/500+t[1],t[2]=t[1]-r[2]/200,[t[0]>se?Math.pow(t[0],3):(116*t[0]-16)/ot,r[0]>8?Math.pow((r[0]+16)/116,3):r[0]/ot,t[2]>se?Math.pow(t[2],3):(116*t[2]-16)/ot].map((i,a)=>i*Dt[a])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function St(r){return(r%360+360)%360}function Sr(r,t){if(r==="raw")return t;let[e,i]=t.map(St),a=i-e;return r==="increasing"?a<0&&(i+=360):r==="decreasing"?a>0&&(e+=360):r==="longer"?-180<a&&a<180&&(a>0?e+=360:i+=360):r==="shorter"&&(a>180?e+=360:a<-180&&(i+=360)),[e,i]}var tt=new f({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:C,fromBase(r){let[t,e,i]=r,a;const s=.02;return Math.abs(e)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,e)*180/Math.PI,[t,Math.sqrt(e**2+i**2),St(a)]},toBase(r){let[t,e,i]=r;return e<0&&(e=0),isNaN(i)&&(i=0),[t,e*Math.cos(i*Math.PI/180),e*Math.sin(i*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const ne=25**7,Mt=Math.PI,oe=180/Mt,U=Mt/180;function $t(r,t,{kL:e=1,kC:i=1,kH:a=1}={}){let[s,n,o]=C.from(r),l=tt.from(C,[s,n,o])[1],[h,u,c]=C.from(t),d=tt.from(C,[h,u,c])[1];l<0&&(l=0),d<0&&(d=0);let p=((l+d)/2)**7,b=.5*(1-Math.sqrt(p/(p+ne))),y=(1+b)*n,v=(1+b)*u,w=Math.sqrt(y**2+o**2),A=Math.sqrt(v**2+c**2),x=y===0&&o===0?0:Math.atan2(o,y),D=v===0&&c===0?0:Math.atan2(c,v);x<0&&(x+=2*Mt),D<0&&(D+=2*Mt),x*=oe,D*=oe;let q=h-s,Y=A-w,E=D-x,V=x+D,Qt=Math.abs(E),W;w*A===0?W=0:Qt<=180?W=E:E>180?W=E-360:E<-180?W=E+360:console.log("the unthinkable has happened");let Kt=2*Math.sqrt(A*w)*Math.sin(W*U/2),fr=(s+h)/2,Lt=(w+A)/2,te=Math.pow(Lt,7),F;w*A===0?F=V:Qt<=180?F=V/2:V<360?F=(V+360)/2:F=(V-360)/2;let ee=(fr-50)**2,mr=1+.015*ee/Math.sqrt(20+ee),re=1+.045*Lt,J=1;J-=.17*Math.cos((F-30)*U),J+=.24*Math.cos(2*F*U),J+=.32*Math.cos((3*F+6)*U),J-=.2*Math.cos((4*F-63)*U);let ie=1+.015*Lt*J,gr=30*Math.exp(-1*((F-275)/25)**2),pr=2*Math.sqrt(te/(te+ne)),_r=-1*Math.sin(2*gr*U)*pr,nt=(q/(e*mr))**2;return nt+=(Y/(i*re))**2,nt+=(Kt/(a*ie))**2,nt+=_r*(Y/(i*re))*(Kt/(a*ie)),Math.sqrt(nt)}const Cr=75e-6;function K(r,t=r.space,{epsilon:e=Cr}={}){r=g(r),t=f.get(t);let i=r.coords;return t!==r.space&&(i=t.from(r)),t.inGamut(i,{epsilon:e})}function et(r){return{space:r.space,coords:r.coords.slice(),alpha:r.alpha}}function I(r,{method:t=z.gamut_mapping,space:e=r.space}={}){if(it(arguments[1])&&(e=arguments[1]),e=f.get(e),K(r,e,{epsilon:0}))return g(r);let i=T(r,e);if(t!=="clip"&&!K(r,e)){let a=I(et(i),{method:"clip",space:e});if($t(r,a)>2){let s=f.resolveCoord(t),n=s.space,o=s.id,l=T(i,n),u=(s.range||s.refRange)[0],c=.01,d=u,m=P(l,o);for(;m-d>c;){let p=et(l);p=I(p,{space:e,method:"clip"}),$t(l,p)-2<c?d=P(l,o):m=P(l,o),X(l,o,(d+m)/2)}i=T(l,e)}else i=a}if(t==="clip"||!K(i,e,{epsilon:0})){let a=Object.values(e.coords).map(s=>s.range||[]);i.coords=i.coords.map((s,n)=>{let[o,l]=a[n];return o!==void 0&&(s=Math.max(o,s)),l!==void 0&&(s=Math.min(s,l)),s})}return e!==r.space&&(i=T(i,r.space)),r.coords=i.coords,r}I.returns="color";function T(r,t,{inGamut:e}={}){r=g(r),t=f.get(t);let i=t.from(r),a={space:t,coords:i,alpha:r.alpha};return e&&(a=I(a)),a}T.returns="color";function vt(r,{precision:t=z.precision,format:e="default",inGamut:i=!0,...a}={}){var l;let s;r=g(r);let n=e;e=r.space.getFormat(e)??r.space.getFormat("default")??f.DEFAULT_FORMAT,i||(i=e.toGamut);let o=r.coords;if(o=o.map(h=>h||0),i&&!K(r)&&(o=I(et(r),i===!0?void 0:i).coords),e.type==="custom")if(a.precision=t,e.serialize)s=e.serialize(o,r.alpha,a);else throw new TypeError(`format ${n} can only be used to parse colors, not for serialization`);else{let h=e.name||"color";e.serializeCoords?o=e.serializeCoords(o,t):t!==null&&(o=o.map(m=>_t(m,t)));let u=[...o];if(h==="color"){let m=e.id||((l=e.ids)==null?void 0:l[0])||r.space.id;u.unshift(m)}let c=r.alpha;t!==null&&(c=_t(c,t));let d=r.alpha<1&&!e.noAlpha?`${e.commas?",":" /"} ${c}`:"";s=`${h}(${u.join(e.commas?", ":" ")}${d})`}return s}const Ar=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],Tr=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]];var Ct=new k({id:"rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:Ar,fromXYZ_M:Tr,formats:{color:{}}});const lt=1.09929682680944,le=.018053968510807;var Ie=new k({id:"rec2020",name:"REC.2020",base:Ct,toBase(r){return r.map(function(t){return t<le*4.5?t/4.5:Math.pow((t+lt-1)/lt,1/.45)})},fromBase(r){return r.map(function(t){return t>=le?lt*Math.pow(t,.45)-(lt-1):4.5*t})},formats:{color:{}}});const Lr=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],Pr=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]];var je=new k({id:"p3-linear",name:"Linear P3",white:"D65",toXYZ_M:Lr,fromXYZ_M:Pr});const Dr=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],Rr=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var qe=new k({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:Dr,fromXYZ_M:Rr,formats:{color:{}}}),he={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let ue=Array(3).fill("<percentage> | <number>[0, 255]"),ce=Array(3).fill("<number>[0, 255]");var rt=new k({id:"srgb",name:"sRGB",base:qe,fromBase:r=>r.map(t=>{let e=t<0?-1:1,i=t*e;return i>.0031308?e*(1.055*i**(1/2.4)-.055):12.92*t}),toBase:r=>r.map(t=>{let e=t<0?-1:1,i=t*e;return i<.04045?t/12.92:e*((i+.055)/1.055)**2.4}),formats:{rgb:{coords:ue},rgb_number:{name:"rgb",commas:!0,coords:ce,noAlpha:!0},color:{},rgba:{coords:ue,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:ce},hex:{type:"custom",toGamut:!0,test:r=>/^#([a-f0-9]{3,4}){1,2}$/i.test(r),parse(r){r.length<=5&&(r=r.replace(/[a-f0-9]/gi,"$&$&"));let t=[];return r.replace(/[a-f0-9]{2}/gi,e=>{t.push(parseInt(e,16)/255)}),{spaceId:"srgb",coords:t.slice(0,3),alpha:t.slice(3)[0]}},serialize:(r,t,{collapse:e=!0}={})=>{t<1&&r.push(t),r=r.map(s=>Math.round(s*255));let i=e&&r.every(s=>s%17===0);return"#"+r.map(s=>i?(s/17).toString(16):s.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:r=>/^[a-z]+$/i.test(r),parse(r){r=r.toLowerCase();let t={spaceId:"srgb",coords:null,alpha:1};if(r==="transparent"?(t.coords=he.black,t.alpha=0):t.coords=he[r],t.coords)return t}}}}),Ge=new k({id:"p3",name:"P3",base:je,fromBase:rt.fromBase,toBase:rt.toBase,formats:{color:{id:"display-p3"}}});z.display_space=rt;if(typeof CSS<"u"&&CSS.supports)for(let r of[C,Ie,Ge]){let t=r.getMinCoords(),i=vt({space:r,coords:t,alpha:1});if(CSS.supports("color",i)){z.display_space=r;break}}function Er(r,{space:t=z.display_space,...e}={}){let i=vt(r,e);if(typeof CSS>"u"||CSS.supports("color",i)||!z.display_space)i=new String(i),i.color=r;else{let a=T(r,t);i=new String(vt(a,e)),i.color=a}return i}function Ze(r,t,e="lab"){e=f.get(e);let i=e.from(r),a=e.from(t);return Math.sqrt(i.reduce((s,n,o)=>{let l=a[o];return isNaN(n)||isNaN(l)?s:s+(l-n)**2},0))}function Br(r,t){return r=g(r),t=g(t),r.space===t.space&&r.alpha===t.alpha&&r.coords.every((e,i)=>e===t.coords[i])}function j(r){return P(r,[L,"y"])}function Ue(r,t){X(r,[L,"y"],t)}function zr(r){Object.defineProperty(r.prototype,"luminance",{get(){return j(this)},set(t){Ue(this,t)}})}var Fr=Object.freeze({__proto__:null,getLuminance:j,register:zr,setLuminance:Ue});function Yr(r,t){r=g(r),t=g(t);let e=Math.max(j(r),0),i=Math.max(j(t),0);return i>e&&([e,i]=[i,e]),(e+.05)/(i+.05)}const Or=.56,$r=.57,Xr=.62,Ir=.65,de=.022,jr=1.414,qr=.1,Gr=5e-4,Zr=1.14,fe=.027,Ur=1.14;function me(r){return r>=de?r:r+(de-r)**jr}function N(r){let t=r<0?-1:1,e=Math.abs(r);return t*Math.pow(e,2.4)}function Nr(r,t){t=g(t),r=g(r);let e,i,a,s,n,o;t=T(t,"srgb"),[s,n,o]=t.coords;let l=N(s)*.2126729+N(n)*.7151522+N(o)*.072175;r=T(r,"srgb"),[s,n,o]=r.coords;let h=N(s)*.2126729+N(n)*.7151522+N(o)*.072175,u=me(l),c=me(h),d=c>u;return Math.abs(c-u)<Gr?i=0:d?(e=c**Or-u**$r,i=e*Zr):(e=c**Ir-u**Xr,i=e*Ur),Math.abs(i)<qr?a=0:i>0?a=i-fe:a=i+fe,a*100}function Hr(r,t){r=g(r),t=g(t);let e=Math.max(j(r),0),i=Math.max(j(t),0);i>e&&([e,i]=[i,e]);let a=e+i;return a===0?0:(e-i)/a}const Vr=5e4;function Wr(r,t){r=g(r),t=g(t);let e=Math.max(j(r),0),i=Math.max(j(t),0);return i>e&&([e,i]=[i,e]),i===0?Vr:(e-i)/i}function Jr(r,t){r=g(r),t=g(t);let e=P(r,[C,"l"]),i=P(t,[C,"l"]);return Math.abs(e-i)}const Qr=216/24389,ge=24/116,ht=24389/27;let Rt=R.D65;var Xt=new f({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Rt,base:L,fromBase(r){let e=r.map((i,a)=>i/Rt[a]).map(i=>i>Qr?Math.cbrt(i):(ht*i+16)/116);return[116*e[1]-16,500*(e[0]-e[1]),200*(e[1]-e[2])]},toBase(r){let t=[];return t[1]=(r[0]+16)/116,t[0]=r[1]/500+t[1],t[2]=t[1]-r[2]/200,[t[0]>ge?Math.pow(t[0],3):(116*t[0]-16)/ht,r[0]>8?Math.pow((r[0]+16)/116,3):r[0]/ht,t[2]>ge?Math.pow(t[2],3):(116*t[2]-16)/ht].map((i,a)=>i*Rt[a])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const Et=Math.pow(5,.5)*.5+.5;function Kr(r,t){r=g(r),t=g(t);let e=P(r,[Xt,"l"]),i=P(t,[Xt,"l"]),a=Math.abs(Math.pow(e,Et)-Math.pow(i,Et)),s=Math.pow(a,1/Et)*Math.SQRT2-40;return s<7.5?0:s}var gt=Object.freeze({__proto__:null,contrastAPCA:Nr,contrastDeltaPhi:Kr,contrastLstar:Jr,contrastMichelson:Hr,contrastWCAG21:Yr,contrastWeber:Wr});function ti(r,t,e={}){it(e)&&(e={algorithm:e});let{algorithm:i,...a}=e;if(!i){let s=Object.keys(gt).map(n=>n.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${s}`)}r=g(r),t=g(t);for(let s in gt)if("contrast"+i.toLowerCase()===s.toLowerCase())return gt[s](r,t,a);throw new TypeError(`Unknown contrast algorithm: ${i}`)}function Ne(r){let[t,e,i]=at(r,L),a=t+15*e+3*i;return[4*t/a,9*e/a]}function He(r){let[t,e,i]=at(r,L),a=t+e+i;return[t/a,e/a]}function ei(r){Object.defineProperty(r.prototype,"uv",{get(){return Ne(this)}}),Object.defineProperty(r.prototype,"xy",{get(){return He(this)}})}var ri=Object.freeze({__proto__:null,register:ei,uv:Ne,xy:He});function ii(r,t){return Ze(r,t,"lab")}const ai=Math.PI,pe=ai/180;function si(r,t,{l:e=2,c:i=1}={}){let[a,s,n]=C.from(r),[,o,l]=tt.from(C,[a,s,n]),[h,u,c]=C.from(t),d=tt.from(C,[h,u,c])[1];o<0&&(o=0),d<0&&(d=0);let m=a-h,p=o-d,b=s-u,y=n-c,v=b**2+y**2-p**2,w=.511;a>=16&&(w=.040975*a/(1+.01765*a));let A=.0638*o/(1+.0131*o)+.638,x;Number.isNaN(l)&&(l=0),l>=164&&l<=345?x=.56+Math.abs(.2*Math.cos((l+168)*pe)):x=.36+Math.abs(.4*Math.cos((l+35)*pe));let D=Math.pow(o,4),q=Math.sqrt(D/(D+1900)),Y=A*(q*x+1-q),E=(m/(e*w))**2;return E+=(p/(i*A))**2,E+=v/Y**2,Math.sqrt(E)}const _e=203;var Nt=new f({id:"xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:L,fromBase(r){return r.map(t=>Math.max(t*_e,0))},toBase(r){return r.map(t=>Math.max(t/_e,0))}});const ut=1.15,ct=.66,be=2610/2**14,ni=2**14/2610,ye=3424/2**12,Me=2413/2**7,ve=2392/2**7,oi=1.7*2523/2**5,we=2**5/(1.7*2523),dt=-.56,Bt=16295499532821565e-27,li=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],hi=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],ui=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],ci=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var Ve=new f({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:Nt,fromBase(r){let[t,e,i]=r,a=ut*t-(ut-1)*i,s=ct*e-(ct-1)*t,o=M(li,[a,s,i]).map(function(d){let m=ye+Me*(d/1e4)**be,p=1+ve*(d/1e4)**be;return(m/p)**oi}),[l,h,u]=M(ui,o);return[(1+dt)*l/(1+dt*l)-Bt,h,u]},toBase(r){let[t,e,i]=r,a=(t+Bt)/(1+dt-dt*(t+Bt)),n=M(ci,[a,e,i]).map(function(d){let m=ye-d**we,p=ve*d**we-Me;return 1e4*(m/p)**ni}),[o,l,h]=M(hi,n),u=(o+(ut-1)*h)/ut,c=(l+(ct-1)*u)/ct;return[u,c,h]},formats:{color:{}}}),It=new f({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:Ve,fromBase(r){let[t,e,i]=r,a;const s=2e-4;return Math.abs(e)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,e)*180/Math.PI,[t,Math.sqrt(e**2+i**2),St(a)]},toBase(r){return[r[0],r[1]*Math.cos(r[2]*Math.PI/180),r[1]*Math.sin(r[2]*Math.PI/180)]},formats:{color:{}}});function di(r,t){let[e,i,a]=It.from(r),[s,n,o]=It.from(t),l=e-s,h=i-n;Number.isNaN(a)&&Number.isNaN(o)?(a=0,o=0):Number.isNaN(a)?a=o:Number.isNaN(o)&&(o=a);let u=a-o,c=2*Math.sqrt(i*n)*Math.sin(u/2*(Math.PI/180));return Math.sqrt(l**2+h**2+c**2)}const We=3424/4096,Je=2413/128,Qe=2392/128,ke=2610/16384,fi=2523/32,mi=16384/2610,xe=32/2523,gi=[[.3592,.6976,-.0358],[-.1922,1.1004,.0755],[.007,.0749,.8434]],pi=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],_i=[[.9999888965628402,.008605050147287059,.11103437159861648],[1.00001110343716,-.008605050147287059,-.11103437159861648],[1.0000320633910054,.56004913547279,-.3206339100541203]],bi=[[2.0701800566956137,-1.326456876103021,.20661600684785517],[.3649882500326575,.6804673628522352,-.04542175307585323],[-.04959554223893211,-.04942116118675749,1.1879959417328034]];var jt=new f({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Nt,fromBase(r){let t=M(gi,r);return yi(t)},toBase(r){let t=Mi(r);return M(bi,t)},formats:{color:{}}});function yi(r){let t=r.map(function(e){let i=We+Je*(e/1e4)**ke,a=1+Qe*(e/1e4)**ke;return(i/a)**fi});return M(pi,t)}function Mi(r){return M(_i,r).map(function(i){let a=Math.max(i**xe-We,0),s=Je-Qe*i**xe;return 1e4*(a/s)**mi})}function vi(r,t){let[e,i,a]=jt.from(r),[s,n,o]=jt.from(t);return 720*Math.sqrt((e-s)**2+.25*(i-n)**2+(a-o)**2)}const wi=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],ki=[[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],xi=[[.2104542553,.793617785,-.0040720468],[1.9779984951,-2.428592205,.4505937099],[.0259040371,.7827717662,-.808675766]],Si=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]];var wt=new f({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"L"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:L,fromBase(r){let e=M(wi,r).map(i=>Math.cbrt(i));return M(xi,e)},toBase(r){let e=M(Si,r).map(i=>i**3);return M(ki,e)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Ci(r,t){let[e,i,a]=wt.from(r),[s,n,o]=wt.from(t),l=e-s,h=i-n,u=a-o;return Math.sqrt(l**2+h**2+u**2)}var kt={deltaE76:ii,deltaECMC:si,deltaE2000:$t,deltaEJz:di,deltaEITP:vi,deltaEOK:Ci};function Q(r,t,e={}){it(e)&&(e={method:e});let{method:i=z.deltaE,...a}=e;r=g(r),t=g(t);for(let s in kt)if("deltae"+i.toLowerCase()===s.toLowerCase())return kt[s](r,t,a);throw new TypeError(`Unknown deltaE method: ${i}`)}function Ai(r,t=.25){let i=[f.get("oklch","lch"),"l"];return X(r,i,a=>a*(1+t))}function Ti(r,t=.25){let i=[f.get("oklch","lch"),"l"];return X(r,i,a=>a*(1-t))}var Li=Object.freeze({__proto__:null,darken:Ti,lighten:Ai});function Ke(r,t,e=.5,i={}){[r,t]=[g(r),g(t)],O(e)==="object"&&([e,i]=[.5,e]);let{space:a,outputSpace:s,premultiplied:n}=i;return st(r,t,{space:a,outputSpace:s,premultiplied:n})(e)}function tr(r,t,e={}){let i;Ht(r)&&([i,e]=[r,t],[r,t]=i.rangeArgs.colors);let{maxDeltaE:a,deltaEMethod:s,steps:n=2,maxSteps:o=1e3,...l}=e;i||([r,t]=[g(r),g(t)],i=st(r,t,l));let h=Q(r,t),u=a>0?Math.max(n,Math.ceil(h/a)+1):n,c=[];if(o!==void 0&&(u=Math.min(u,o)),u===1)c=[{p:.5,color:i(.5)}];else{let d=1/(u-1);c=Array.from({length:u},(m,p)=>{let b=p*d;return{p:b,color:i(b)}})}if(a>0){let d=c.reduce((m,p,b)=>{if(b===0)return 0;let y=Q(p.color,c[b-1].color,s);return Math.max(m,y)},0);for(;d>a;){d=0;for(let m=1;m<c.length&&c.length<o;m++){let p=c[m-1],b=c[m],y=(b.p+p.p)/2,v=i(y);d=Math.max(d,Q(v,p.color),Q(v,b.color)),c.splice(m,0,{p:y,color:i(y)}),m++}}}return c=c.map(d=>d.color),c}function st(r,t,e={}){if(Ht(r)){let[l,h]=[r,t];return st(...l.rangeArgs.colors,{...l.rangeArgs.options,...h})}let{space:i,outputSpace:a,progression:s,premultiplied:n}=e;r=g(r),t=g(t),r=et(r),t=et(t);let o={colors:[r,t],options:e};if(i?i=f.get(i):i=f.registry[z.interpolationSpace]||r.space,a=a?f.get(a):i,r=T(r,i),t=T(t,i),r=I(r),t=I(t),i.coords.h&&i.coords.h.type==="angle"){let l=e.hue=e.hue||"shorter",h=[i,"h"],[u,c]=[P(r,h),P(t,h)];[u,c]=Sr(l,[u,c]),X(r,h,u),X(t,h,c)}return n&&(r.coords=r.coords.map(l=>l*r.alpha),t.coords=t.coords.map(l=>l*t.alpha)),Object.assign(l=>{l=s?s(l):l;let h=r.coords.map((d,m)=>{let p=t.coords[m];return bt(d,p,l)}),u=bt(r.alpha,t.alpha,l),c={space:i,coords:h,alpha:u};return n&&(c.coords=c.coords.map(d=>d/u)),a!==i&&(c=T(c,a)),c},{rangeArgs:o})}function Ht(r){return O(r)==="function"&&!!r.rangeArgs}z.interpolationSpace="lab";function Pi(r){r.defineFunction("mix",Ke,{returns:"color"}),r.defineFunction("range",st,{returns:"function<color>"}),r.defineFunction("steps",tr,{returns:"array<color>"})}var Di=Object.freeze({__proto__:null,isRange:Ht,mix:Ke,range:st,register:Pi,steps:tr}),er=new f({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:rt,fromBase:r=>{let t=Math.max(...r),e=Math.min(...r),[i,a,s]=r,[n,o,l]=[NaN,0,(e+t)/2],h=t-e;if(h!==0){switch(o=l===0||l===1?0:(t-l)/Math.min(l,1-l),t){case i:n=(a-s)/h+(a<s?6:0);break;case a:n=(s-i)/h+2;break;case s:n=(i-a)/h+4}n=n*60}return[n,o*100,l*100]},toBase:r=>{let[t,e,i]=r;t=t%360,t<0&&(t+=360),e/=100,i/=100;function a(s){let n=(s+t/30)%12,o=e*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(n-3,9-n,1))}return[a(0),a(8),a(4)]},formats:{hsl:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),rr=new f({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:er,fromBase(r){let[t,e,i]=r;e/=100,i/=100;let a=i+e*Math.min(i,1-i);return[t,a===0?0:200*(1-i/a),100*a]},toBase(r){let[t,e,i]=r;e/=100,i/=100;let a=i*(1-e/2);return[t,a===0||a===1?0:(i-a)/Math.min(a,1-a)*100,a*100]},formats:{color:{toGamut:!0}}}),Ri=new f({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:rr,fromBase(r){let[t,e,i]=r;return[t,i*(100-e)/100,100-i]},toBase(r){let[t,e,i]=r;e/=100,i/=100;let a=e+i;if(a>=1){let o=e/a;return[t,0,o*100]}let s=1-i,n=s===0?0:1-e/s;return[t,n*100,s*100]},formats:{hwb:{toGamut:!0,coords:["<number> | <angle>","<percentage>","<percentage>"]}}});const Ei=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],Bi=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]];var ir=new k({id:"a98rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:Ei,fromXYZ_M:Bi}),zi=new k({id:"a98rgb",name:"Adobe® 98 RGB compatible",base:ir,toBase:r=>r.map(t=>Math.pow(Math.abs(t),563/256)*Math.sign(t)),fromBase:r=>r.map(t=>Math.pow(Math.abs(t),256/563)*Math.sign(t)),formats:{color:{id:"a98-rgb"}}});const Fi=[[.7977604896723027,.13518583717574031,.0313493495815248],[.2880711282292934,.7118432178101014,8565396060525902e-20],[0,0,.8251046025104601]],Yi=[[1.3457989731028281,-.25558010007997534,-.05110628506753401],[-.5446224939028347,1.5082327413132781,.02053603239147973],[0,0,1.2119675456389454]];var ar=new k({id:"prophoto-linear",name:"Linear ProPhoto",white:"D50",base:Ut,toXYZ_M:Fi,fromXYZ_M:Yi});const Oi=1/512,$i=16/512;var Xi=new k({id:"prophoto",name:"ProPhoto",base:ar,toBase(r){return r.map(t=>t<$i?t/16:t**1.8)},fromBase(r){return r.map(t=>t>=Oi?t**(1/1.8):16*t)},formats:{color:{id:"prophoto-rgb"}}}),Ii=new f({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:wt,fromBase(r){let[t,e,i]=r,a;const s=2e-4;return Math.abs(e)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,e)*180/Math.PI,[t,Math.sqrt(e**2+i**2),St(a)]},toBase(r){let[t,e,i]=r,a,s;return isNaN(i)?(a=0,s=0):(a=e*Math.cos(i*Math.PI/180),s=e*Math.sin(i*Math.PI/180)),[t,a,s]},formats:{oklch:{coords:["<number> | <percentage>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});const Se=203,Ce=2610/2**14,ji=2**14/2610,qi=2523/2**5,Ae=2**5/2523,Te=3424/2**12,Le=2413/2**7,Pe=2392/2**7;var Gi=new k({id:"rec2100pq",name:"REC.2100-PQ",base:Ct,toBase(r){return r.map(function(t){return(Math.max(t**Ae-Te,0)/(Le-Pe*t**Ae))**ji*1e4/Se})},fromBase(r){return r.map(function(t){let e=Math.max(t*Se/1e4,0),i=Te+Le*e**Ce,a=1+Pe*e**Ce;return(i/a)**qi})},formats:{color:{id:"rec2100-pq"}}});const De=.17883277,Re=.28466892,Ee=.55991073,zt=3.7743;var Zi=new k({id:"rec2100hlg",cssid:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Ct,toBase(r){return r.map(function(t){return t<=.5?t**2/3*zt:(Math.exp((t-Ee)/De)+Re)/12*zt})},fromBase(r){return r.map(function(t){return t/=zt,t<=1/12?Math.sqrt(3*t):De*Math.log(12*t-Re)+Ee})},formats:{color:{id:"rec2100-hlg"}}});const sr={};$.add("chromatic-adaptation-start",r=>{r.options.method&&(r.M=nr(r.W1,r.W2,r.options.method))});$.add("chromatic-adaptation-end",r=>{r.M||(r.M=nr(r.W1,r.W2,r.options.method))});function At({id:r,toCone_M:t,fromCone_M:e}){sr[r]=arguments[0]}function nr(r,t,e="Bradford"){let i=sr[e],[a,s,n]=M(i.toCone_M,r),[o,l,h]=M(i.toCone_M,t),u=[[o/a,0,0],[0,l/s,0],[0,0,h/n]],c=M(u,i.toCone_M);return M(i.fromCone_M,c)}At({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599364,-1.1293816,.2198974],[.3611914,.6388125,-64e-7],[0,0,1.0890636]]});At({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]]});At({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238,-.278869,.1827452],[.454369,.4735332,.0720978],[-.0096276,-.005698,1.0153256]]});At({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.011254630531685,.1491867754444518],[.3875265432361372,.6214474419314753,-.008973985167612518],[-.01584149884933386,-.03412293802851557,1.04996443687785]]});Object.assign(R,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});R.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];const Ui=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],Ni=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]];var or=new k({id:"acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:R.ACES,toXYZ_M:Ui,fromXYZ_M:Ni,formats:{color:{}}});const ft=2**-16,Ft=-.35828683,mt=(Math.log2(65504)+9.72)/17.52;var Hi=new k({id:"acescc",name:"ACEScc",coords:{r:{range:[Ft,mt],name:"Red"},g:{range:[Ft,mt],name:"Green"},b:{range:[Ft,mt],name:"Blue"}},referred:"scene",base:or,toBase(r){const t=-.3013698630136986;return r.map(function(e){return e<=t?(2**(e*17.52-9.72)-ft)*2:e<mt?2**(e*17.52-9.72):65504})},fromBase(r){return r.map(function(t){return t<=0?(Math.log2(ft)+9.72)/17.52:t<ft?(Math.log2(ft+t*.5)+9.72)/17.52:(Math.log2(t)+9.72)/17.52})},formats:{color:{}}}),Be=Object.freeze({__proto__:null,A98RGB:zi,A98RGB_Linear:ir,ACEScc:Hi,ACEScg:or,HSL:er,HSV:rr,HWB:Ri,ICTCP:jt,JzCzHz:It,Jzazbz:Ve,LCH:tt,Lab:C,Lab_D65:Xt,OKLCH:Ii,OKLab:wt,P3:Ge,P3_Linear:je,ProPhoto:Xi,ProPhoto_Linear:ar,REC_2020:Ie,REC_2020_Linear:Ct,REC_2100_HLG:Zi,REC_2100_PQ:Gi,XYZ_ABS_D65:Nt,XYZ_D50:Ut,XYZ_D65:L,sRGB:rt,sRGB_Linear:qe});class _{constructor(...t){let e;t.length===1&&(e=g(t[0]));let i,a,s;e?(i=e.space||e.spaceId,a=e.coords,s=e.alpha):[i,a,s]=t,Object.defineProperty(this,"space",{value:f.get(i),writable:!1,enumerable:!0,configurable:!0}),this.coords=a?a.slice():[0,0,0],this.alpha=s<1?s:1;for(let n=0;n<this.coords.length;n++)this.coords[n]==="NaN"&&(this.coords[n]=NaN);for(let n in this.space.coords)Object.defineProperty(this,n,{get:()=>this.get(n),set:o=>this.set(n,o)})}get spaceId(){return this.space.id}clone(){return new _(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...t){let e=Er(this,...t);return e.color=new _(e.color),e}static get(t,...e){return t instanceof _?t:new _(t,...e)}static defineFunction(t,e,i=e){let{instance:a=!0,returns:s}=i,n=function(...o){let l=e(...o);if(s==="color")l=_.get(l);else if(s==="function<color>"){let h=l;l=function(...u){let c=h(...u);return _.get(c)},Object.assign(l,h)}else s==="array<color>"&&(l=l.map(h=>_.get(h)));return l};t in _||(_[t]=n),a&&(_.prototype[t]=function(...o){return n(this,...o)})}static defineFunctions(t){for(let e in t)_.defineFunction(e,t[e],t[e])}static extend(t){if(t.register)t.register(_);else for(let e in t)_.defineFunction(e,t[e])}}_.defineFunctions({get:P,getAll:at,set:X,setAll:Xe,to:T,equals:Br,inGamut:K,toGamut:I,distance:Ze,toString:vt});Object.assign(_,{util:Mr,hooks:$,WHITES:R,Space:f,spaces:f.registry,parse:$e,defaults:z});for(let r of Object.keys(Be))f.register(Be[r]);for(let r in f.registry)qt(r,f.registry[r]);$.add("colorspace-init-end",r=>{var t;qt(r.id,r),(t=r.aliases)==null||t.forEach(e=>{qt(e,r)})});function qt(r,t){Object.keys(t.coords),Object.values(t.coords).map(i=>i.name);let e=r.replace(/-/g,"_");Object.defineProperty(_.prototype,e,{get(){let i=this.getAll(r);return typeof Proxy>"u"?i:new Proxy(i,{has:(a,s)=>{try{return f.resolveCoord([t,s]),!0}catch{}return Reflect.has(a,s)},get:(a,s,n)=>{if(s&&typeof s!="symbol"&&!(s in a)){let{index:o}=f.resolveCoord([t,s]);if(o>=0)return a[o]}return Reflect.get(a,s,n)},set:(a,s,n,o)=>{if(s&&typeof s!="symbol"&&!(s in a)||s>=0){let{index:l}=f.resolveCoord([t,s]);if(l>=0)return a[l]=n,this.setAll(r,a),!0}return Reflect.set(a,s,n,o)}})},set(i){this.setAll(r,i)},configurable:!0,enumerable:!0})}_.extend(kt);_.extend({deltaE:Q});Object.assign(_,{deltaEMethods:kt});_.extend(Li);_.extend({contrast:ti});_.extend(ri);_.extend(Fr);_.extend(Di);_.extend(gt);function Vt(r){return r}function G(r){return r*r*(3-2*r)}function lr(r,t,e,i){return r*t+e*i}function hr(r,t,e,i){let a=[Math.round((r.r*t+e.r*i)*255),Math.round((r.g*t+e.g*i)*255),Math.round((r.b*t+e.b*i)*255)];return`rgb(${a[0]}, ${a[1]}, ${a[2]})`}function Tt(r){if(typeof r=="number")return lr;if(typeof r=="string"){let t={};return(e,i,a,s)=>(t[e]||(t[e]=new _(e).srgb),t[a]||(t[a]=new _(a).srgb),hr(t[e],i,t[a],s))}return(t,e,i,a)=>e<1?t:i}function Z(r,t=void 0){return t===void 0&&(t=Tt(r)),{finalValue:r,interpolate:(e,i)=>t(e,1-Math.min(i,1),r,Math.min(i,1))}}function Vi(r,t=void 0){return t===void 0&&(t=Tt(r())),{interpolate:(e,i)=>t(e,1-Math.min(i,1),r(),Math.min(i,1))}}function Wi(r,t=void 0){return t===void 0&&(t=Tt(r[0])),{interpolate:(e,i)=>{let a=Math.min(i,1)*(r.length-1)-1,s=Math.min(a-Math.floor(a),1);return a<0?t(e,1-s,r[0],s):t(r[Math.floor(a)],1-s,r[Math.floor(a)+1],s)}}}class B{constructor(t,e=1e3,i=Vt){this.duration=0,this.finalValue=void 0,this.interpolator=null,this.duration=e,t.hasOwnProperty("finalValue")?this.finalValue=t.finalValue:this.finalValue=void 0,this.interpolator=t,this.curve=i}evaluate(t,e){let i=this.curve(this.duration>0?e/this.duration:1);return this.interpolator.interpolate(t,i)}withDelay(t){return t?new Ji(this,t):this}}class xt extends B{constructor(t,e){super(Z(t),e,G)}}class Ji extends B{constructor(t,e){super(t.interpolator,t.duration+e,t.curve),this.delay=e}evaluate(t,e){return e<=this.delay?t:super.evaluate(t,(e-this.delay)*this.duration/(this.duration-this.delay))}}function Qi(r,t=1e3,e=Vt){return new B(Z(r),t,e)}function pt(r,t){return typeof r=="number"&&typeof t=="number"?Math.abs(r-t)<=.001:r==t}function ur(){var r=0;return Object.assign(function(){return r},{advance:e=>{r+=e}})}function Ki(r){let t=new Set;for(;r=Reflect.getPrototypeOf(r);)Reflect.ownKeys(r).forEach(i=>t.add(i));return t}class ta{constructor(t=void 0){this.info=t,this.promise=new Promise((e,i)=>{this.reject=i,this.resolve=e})}}function ea(r){let t=1e12,e=-1e12,i=1e12,a=-1e12;return r.forEach(s=>{s.x<t&&(t=s.x),s.x>e&&(e=s.x),s.y<i&&(i=s.y),s.y>a&&(a=s.y)}),{x:[t,e],y:[i,a]}}class H{constructor(t){if(this.valueFn=void 0,this.transform=void 0,this.cached=!1,this._cachedValue=null,this.computeArg=void 0,this.precompute=!1,this.lazy=!1,this.needsUpdate=!1,this.animation=null,this.label=null,this._getterValue=null,this._computedLastValue=null,this._hasComputed=!1,this._timeProvider=null,this.currentTime=0,this._changedLastTick=!1,this._listeners=[],this._animationCompleteCallbacks=[],t==null||t==null||!(t.hasOwnProperty("value")||t.hasOwnProperty("valueFn")))typeof t=="function"?this.valueFn=t:this.value=t;else{let e=t;e.valueFn!==void 0?this.valueFn=e.valueFn:e.value!==void 0?this.value=e.value:console.error("One of `value` or `valueFn` must be defined to create an Attribute"),this.transform=e.transform||null,this.cached=e.cached||!1,this._cachedValue=null,this.computeArg=e.computeArg||null,this.precompute=e.precompute||!1,this.lazy=e.lazy||!1}}addListener(t){this._listeners.push(t)}removeListener(t){let e=this._listeners.indexOf(t);e>=0&&(this._listeners=this._listeners.splice(e,1))}setTimeProvider(t){this._timeProvider=t}_getComputeArg(){return this.computeArg!==void 0?this.computeArg:this}compute(){this.valueFn&&(this._computedLastValue=this.valueFn(this._getComputeArg()))}advance(t=void 0){return(this.animation!=null||this.needsUpdate||this.valueFn)&&(this._timeProvider===null?this.currentTime+=t:this.currentTime=this._timeProvider()),this.animation==null&&this._animationCompleteCallbacks.length>0&&(console.warn("Found animation-complete callbacks for a non-existent animation"),this._cleanUpAnimation(!0)),this._animationFinished()&&this._computeAnimation(),this.animation!=null||this.needsUpdate?(this.needsUpdate=!1,this._changedLastTick=!0,!0):(this.precompute&&this.compute(),this._changedLastTick=!1,!1)}_computeAnimation(t=!0){if(!this.animation)return;this._timeProvider&&(this.currentTime=this._timeProvider());let{animator:e,start:i}=this.animation,a=e.evaluate(this.valueFn?this._computedLastValue:this.value,Math.min(this.currentTime-i,e.duration));this._animationFinished()&&t?(this.valueFn?this.compute():this.value=a,this._cleanUpAnimation(!1),this._getterValue=null):this._getterValue=a}_animationFinished(){return this.animation?this.animation.animator.duration-20<=this.currentTime-this.animation.start:!0}_transform(t){let e;if(this.transform){let i=this._cachedValue;if(i&&pt(i.raw,t))e=i.result;else{let a=t;e=this.transform(t,this._getComputeArg()),this.cached&&(this._cachedValue={raw:a,result:e})}}else e=t;return e}_cleanUpAnimation(t=!1){this.animation=null,this._animationCompleteCallbacks.forEach(e=>{!t||!e.info.rejectOnCancel?e.resolve(this):e.reject({newValue:this.last()})}),this._animationCompleteCallbacks=[]}get(){return this._transform(this.getUntransformed())}getUntransformed(){this._computeAnimation();let t;return this._getterValue!=null?t=this._getterValue:this.valueFn?((!this.lazy||!this._hasComputed)&&(this.compute(),this._hasComputed=!0),t=this._computedLastValue):t=this.value,t}getPreload(t=null){if(this._timeProvider&&(this.currentTime=this._timeProvider()),!this.animation){let i=this.get();return{start:i,end:i,startTime:t||this.currentTime,endTime:t||this.currentTime}}let e=this.getPreloadUntransformed(t);return{start:this._transform(e.start),end:this._transform(e.end),startTime:e.startTime,endTime:e.endTime}}getPreloadUntransformed(t=null){if(this._timeProvider&&(this.currentTime=this._timeProvider()),!this.animation){let s=this.getUntransformed();return{start:s,end:s,startTime:t||this.currentTime,endTime:t||this.currentTime}}if(!(this.animation.animator instanceof xt))return console.error("Calling getPreload for a non-preloadable animation is forbidden. If using MarkSet, make sure this attribute is registered as preloadable."),null;if(this._animationFinished())return this._computeAnimation(),this.getPreloadUntransformed(t);let e;this.valueFn?((!this.lazy||!this._hasComputed)&&(this.compute(),this._hasComputed=!0),e=this._computedLastValue):e=this.value;let i=this.animation.animator.finalValue,a=(t||this.currentTime)-this.currentTime;return{start:e,end:i,startTime:this.animation.start+a,endTime:this.animation.start+this.animation.animator.duration+a}}set(t){typeof t=="function"?(this.value!=null&&(this._computedLastValue=this.value),this.valueFn=t,this.value=void 0,this._getterValue=null):(this.value=t,this.valueFn=null,this._getterValue=null),this.needsUpdate=!0,this.animation&&this._cleanUpAnimation(!0),this._listeners.forEach(e=>e(this,!1))}data(){return this.valueFn?this.valueFn(this._getComputeArg()):this.value}last(){return this.animation&&this._computeAnimation(!1),this._getterValue!=null?this._getterValue:this.value!==void 0?this.value:this._computedLastValue}future(){return this.animation?this.animation.animator.finalValue:this.last()}updateTransform(){this._cachedValue=null}animate(t){this._timeProvider&&(this.currentTime=this._timeProvider()),this.animation&&(this.valueFn?this._computedLastValue=this.last():this.value=this.last(),this._cleanUpAnimation(!0)),this.animation={animator:t,start:this.currentTime},this._computeAnimation(),this._listeners.forEach(e=>e(this,!0))}wait(t=!0){if(!this.animation)return new Promise((i,a)=>i(this));let e=new ta({rejectOnCancel:t});return this._animationCompleteCallbacks.push(e),e.promise}changed(){return this._changedLastTick}}function Yt(r,t,e){return Object.fromEntries(Object.entries(r).map(([i,a])=>[i,typeof a=="function"?a(t,e):a]))}class Wt{constructor(t=[],e={animationDuration:1e3,animationCurve:G}){this.timeProvider=null,this.lazyUpdates=!0,this.animatingMarks=new Set,this.updatedMarks=new Set,this.preloadableProperties=new Set,this._forceUpdate=!1,this._markListChanged=!1,this._changedLastTick=!1,this.timeProvider=ur(),this.lazyUpdates=!0,this._defaultDuration=1e3,this._defaultCurve=G,this.configure(e),this.marks=t,this.marksByID=new Map,this.marks.forEach(i=>{if(this.marksByID.has(i.id)){console.error(`ID '${i.id}' is duplicated in mark render group`);return}this.marksByID.set(i.id,i),this._configureMark(i)})}configure(t){return t.timeProvider!==void 0&&(this.timeProvider=t.timeProvider),t.lazyUpdates!==void 0&&(this.lazyUpdates=t.lazyUpdates),t.animationDuration!==void 0&&(this._defaultDuration=t.animationDuration),t.animationCurve!==void 0&&(this._defaultCurve=t.animationCurve),this.marks&&this.getMarks().forEach(e=>this._configureMark(e)),this}_configureMark(t){t.setTimeProvider(this.timeProvider),t.configure({animationDuration:this._defaultDuration,animationCurve:this._defaultCurve}),t.addListener((e,i,a)=>{this.updatedMarks.add(e),!this.preloadableProperties.has(i)&&a&&this.animatingMarks.add(e),this._changedLastTick=!0})}forceUpdate(){return this._forceUpdate=!0,this}currentTime(){return this.timeProvider()}getMarks(){return this.marks}registerPreloadableProperty(t){return this.preloadableProperties.add(t),this}advance(t){this.timeProvider.advance(t);let e=this.lazyUpdates?[...this.animatingMarks,...this.updatedMarks]:this.getMarks();if(this.updatedMarks=new Set,e.length==0&&!this._forceUpdate&&!this._markListChanged)return this._changedLastTick=!1,!1;for(let i of e)i.advance()||this.animatingMarks.delete(i);return this._forceUpdate=!1,this._markListChanged=!1,this._changedLastTick=!0,!0}marksAnimating(){return this.animatingMarks.size>0}animateTo(t,e,i={}){return this.preloadableProperties.has(t)?this.forEach((s,n)=>{let o=Yt(i,s,n),l=o.duration===void 0?this._defaultDuration:o.duration;s.animate(t,new xt(typeof e=="function"?e(s,n):e,l).withDelay(o.delay||0))}):this.forEach((s,n)=>{s.animateTo(t,typeof e=="function"?e(s,n):e,Yt(i,s,n))}),this}animate(t,e={}){let i=this.preloadableProperties.has(t);return i&&e.interpolator?(console.error("Cannot apply custom interpolator function on preloadable property."),this):(this.forEach((a,s)=>{let n=Yt(e,a,s);if(i){let o=n.duration===void 0?this._defaultDuration:n.duration,l=a.data(t);a.animate(t,new xt(l,o).withDelay(n.delay||0))}else a.animate(t,n)}),this)}update(t,e=void 0){return this.forEach((i,a)=>{i.setAttr(t,e===void 0?void 0:typeof e=="function"?e(i,a):e)}),this}wait(t,e=!0){return Promise.all(this.map(i=>i.wait(t,e)))}getMarkByID(t){return this.marksByID.get(t)}forEach(t){this.getMarks().forEach(t)}map(t){return this.getMarks().map(t)}filter(t){let e=Object.assign({},this),i=this.getMarks().filter(t);return Object.keys(this).forEach(a=>{e[a]=this[a]}),e.marks=i,e.marksByID=new Map,i.forEach(a=>{e.marksByID.set(a.id,a)}),Ki(this).forEach(a=>{a=="getMarks"?e[a]=()=>i:e[a]=(...s)=>{let n=this.getMarks();this.marks=i;let o=this[a](...s);return this.marks=n,o===this?e:o}}),e}updateTransform(t){return this.getMarks().forEach(e=>e.updateTransform(t)),this}addMark(t){if(this.marksByID.has(t.id))return console.error("Attempted to add mark with ID that exists:",t.id),this;this.marks.push(t),this.marksByID.set(t.id,t),this._configureMark(t),this._markListChanged=!0}removeMark(t){let e=this.marks.indexOf(t);if(e<0)return console.warn("Attempted to remove mark that does not exist"),this;this.marks.splice(e,1),this.marksByID.delete(t.id),this._markListChanged=!0}count(){return this.getMarks().length}changed(t=void 0){return t===void 0?this._changedLastTick:this._changedLastTick&&this.getMarks().some(e=>e.changed(t))}}function ra(r=[]){return new Wt(r)}const ia=5e3;class Gt{constructor(t,e){this._timeProvider=null,this._listeners=[],this._defaultDuration=1e3,this._defaultCurve=G,this._changedLastTick=!1,this.framesWithUpdate=0,this.id=t;let i={};Object.keys(e).forEach(a=>{let s=new H(Object.assign(Object.assign({},e[a]),{computeArg:this}));s.addListener((n,o)=>this._attributesChanged(a,o)),i[a]=s}),this.attributes=i}configure(t){return t.animationDuration!==void 0&&(this._defaultDuration=t.animationDuration),t.animationCurve!==void 0&&(this._defaultCurve=t.animationCurve),this}addListener(t){return this._listeners.push(t),this}removeListener(t){let e=this._listeners.indexOf(t);return e>=0&&(this._listeners=this._listeners.splice(e,1)),this}_attributesChanged(t,e){this._changedLastTick=!0,this._listeners.forEach(i=>i(this,t,e))}setTimeProvider(t){return this._timeProvider=t,Object.values(this.attributes).forEach(e=>e.setTimeProvider(this._timeProvider)),this}advance(t=void 0){let e=!1;return Object.values(this.attributes).forEach(i=>{i.advance(t)&&(e=!0)}),e?(this.framesWithUpdate+=1,this.framesWithUpdate>ia&&console.warn("Marks are being updated excessively!"),this._changedLastTick=!0,!0):(this.framesWithUpdate=0,this._changedLastTick=!1,!1)}setAttr(t,e=void 0){let i=this.attributes[t],a=i.last();return e===void 0?i.compute():i.set(e),pt(a,i.data())||this._listeners.forEach(s=>s(this,t,!1)),this}attr(t,e=!0){if(this.attributes[t])return e?this.attributes[t].get():this.attributes[t].getUntransformed()}data(t){return this.attributes[t].data()}updateTransform(t){return this.attributes[t].updateTransform(),this}animateTo(t,e,i={}){if(typeof e=="function")return this.attributes[t].set(e),this.animate(t,{duration:i.duration,curve:i.curve}),this;if(!this.attributes.hasOwnProperty(t))return console.error(`Attempting to animate undefined property ${String(t)}`),this;let a=i.duration===void 0?this._defaultDuration:i.duration,s=i.curve===void 0?this._defaultCurve:i.curve,n=new B(Z(e),a,s).withDelay(i.delay||0);return this.attributes[t].animate(n),this}animate(t,e={}){if(!this.attributes.hasOwnProperty(t))return console.error(`Attempting to animate undefined property ${String(t)}`),this;let i;if(e instanceof B)i=e;else if(e.interpolator!==void 0){let a=e.interpolator;i=new B(a,e.duration!==void 0?e.duration:this._defaultDuration,e.curve!==void 0?e.curve:this._defaultCurve).withDelay(e.delay||0)}else{let a=this.data(t);if(!pt(a,this.attributes[t].last())||!pt(a,this.attributes[t].future()))i=new B(Z(a),e.duration!==void 0?e.duration:this._defaultDuration,e.curve!==void 0?e.curve:this._defaultCurve).withDelay(e.delay||0);else return this}return this.attributes[t].animate(i),this}wait(t,e=!0){let i=Array.isArray(t)?t:[t];return Promise.all(i.map(a=>this.attributes[a].wait(e)))}changed(t=void 0){return t===void 0?this._changedLastTick:Array.isArray(t)?this._changedLastTick&&t.some(e=>this.attributes[e].changed()):this._changedLastTick&&this.attributes[t].changed()}}class aa{constructor(t){this._callbacks=[],this._lastTick=void 0,this.stopped=!0,typeof t.advance=="function"?this.toAdvance=[t]:this.toAdvance=t,this.start()}onChange(t){return this._callbacks.push(t),this}start(){return this._lastTick=window.performance.now(),this.stopped=!1,this._callbacks.forEach(t=>t()),requestAnimationFrame(t=>this.tick(t)),this}stop(){return this._lastTick=void 0,this.stopped=!0,this}tick(t){this._lastTick===void 0&&(this._lastTick=window.performance.now()),this.toAdvance.map(e=>e.advance(t-this._lastTick)).some(e=>e)&&this._callbacks.forEach(e=>e()),this.stopped||requestAnimationFrame(e=>this.tick(e)),this._lastTick=t}}class sa{constructor(t){this._callbacks=[],this._lastTick=void 0,this.stopped=!0,typeof t.advance=="function"?this.toAdvance=[t]:this.toAdvance=t,this.start()}onChange(t){return this._callbacks.push(t),this}start(){if(this.stopped)return this._lastTick=window.performance.now(),this.stopped=!1,this._callbacks.forEach(t=>t()),requestAnimationFrame(t=>this.tick(t)),this}stop(){return this._lastTick=void 0,this.stopped=!0,this}tick(t){this._lastTick===void 0&&(this._lastTick=window.performance.now()),this.toAdvance.map(e=>e.advance(t-this._lastTick)).some(e=>e)?(this._callbacks.forEach(e=>e()),this.stopped||requestAnimationFrame(e=>this.tick(e)),this._lastTick=t):this.stop()}}var cr=(r=>(r.Waiting="waiting",r.Entering="entering",r.Visible="visible",r.Exiting="exiting",r))(cr||{}),dr=(r=>(r.Show="show",r.Hide="hide",r))(dr||{});class na{constructor(t){this.pool=new Map,this.queuedAnimations=new Map,this._flushTimer=null,this._renderGroup=null,this.defer=!1,t.create||console.error("StageManager requires a create callback"),this._callbacks={create:t.create,show:t.show||(async()=>{}),hide:t.hide||(async()=>{}),destroy:t.destroy||(()=>{})}}configure(t={}){return t.defer!==void 0&&(this.defer=t.defer),this}attach(t){return this._renderGroup=t,this}_perform(t,e){let i=this.pool.get(t);if(!(!i||!i.element)){if(e=="show"){if(i.lastState=="visible")return;i.lastState="entering",this._callbacks.show(i.element,i.info).then(()=>{i.state=="entering"&&(i.state="visible",i.lastState="visible")},()=>{})}else if(e=="hide"){if(i.lastState=="exiting"||i.lastState=="waiting")return;i.lastState="exiting",this._callbacks.hide(i.element,i.info).then(()=>{let a=this.pool.get(t);a&&a.lastState=="exiting"&&(this._renderGroup&&this._renderGroup.removeMark(a.element),this._callbacks.destroy(t,a.info),this.pool.delete(t))},()=>{})}}}_enqueue(t,e){let i=this.pool.get(t);if(!i.element)return!1;if(e=="show"){if(i.state=="entering"||i.state=="visible")return!1;i.state="entering"}else if(e=="hide"){if(i.state=="exiting")return!1;i.state="exiting"}else console.error("Unknown action enqueued:",e);return this.defer?(this.queuedAnimations.set(t,e),this._flushTimer||(this._flushTimer=window.setTimeout(()=>this._flush(),0))):this._perform(t,e),!0}_flush(){this._flushTimer=null,this.queuedAnimations.forEach((t,e)=>{this._perform(e,t)}),this.queuedAnimations.clear()}show(t,e=void 0){if(!this.pool.has(t)){let i=e!=null?typeof e=="function"?e(t):e:null,a=this._callbacks.create(t,i);this._renderGroup&&this._renderGroup.addMark(a),this.pool.set(t,{element:a,info:i,state:"waiting",lastState:"waiting"})}return this._enqueue(t,"show")}hide(t){return this.pool.has(t)?this._enqueue(t,"hide"):!1}getInfo(t){return this.pool.has(t)?this.pool.get(t).info:null}getElement(t){return this.pool.has(t)?this.pool.get(t).element:null}getAll(){return new Map(this.pool)}getAllIDs(){return Array.from(this.pool.keys())}getAllVisible(){let t=new Map;for(let[e,i]of this.pool)(i.state=="visible"||i.state=="entering")&&i.element&&t.set(e,i);return t}getAllVisibleIDs(){return Array.from(this.pool.keys()).filter(t=>(this.pool.get(t).state=="visible"||this.pool.get(t).state=="entering")&&!!this.pool.get(t).element)}isVisible(t){return this.pool.has(t)&&(this.pool.get(t).state=="visible"||this.pool.get(t).state=="entering")}}class oa{constructor(t={}){this.animationDuration=1e3,this.squareAspect=!0,this._xScaleFactor=new H(1),this._yScaleFactor=new H(1),this._translateX=new H(0),this._translateY=new H(0),this.timeProvider=ur(),this.controller=null,this._updatedNoAdvance=!1,this.listeners=[],this.xScale=Object.assign(e=>((e-this._xDomain[0])*this.xRSpan()/this.xDSpan()+this._xRange[0])*this._xScaleFactor.get()+this._translateX.get(),{domain:(e=void 0)=>e===void 0?this._xDomain:(this._xDomain=e,this.xScale),range:(e=void 0)=>e===void 0?this._xRange:(this._xRange=e,this.xScale),invert:e=>((e-this._translateX.get())/this._xScaleFactor.get()-this._xRange[0])*this.xDSpan()/this.xRSpan()+this._xDomain[0]}),this.yScale=Object.assign(e=>((e-this._yDomain[0])*this.yRSpan()/this.yDSpan()+this._yRange[0])*this._yScaleFactor.get()+this._translateY.get(),{domain:(e=void 0)=>e===void 0?this._yDomain:(this._yDomain=e,this.yScale),range:(e=void 0)=>e===void 0?this._yRange:(this._yRange=e,this.yScale),invert:e=>((e-this._translateY.get())/this._yScaleFactor.get()-this._yRange[0])*this.yDSpan()/this.yRSpan()+this._yDomain[0]}),this.xDomain([0,1]),this.yDomain([0,1]),this.xRange([0,1]),this.yRange([0,1]),this.configure(t),this._xScaleFactor.setTimeProvider(this.timeProvider),this._yScaleFactor.setTimeProvider(this.timeProvider),this._translateX.setTimeProvider(this.timeProvider),this._translateY.setTimeProvider(this.timeProvider)}configure(t={}){return this.animationDuration=t.animationDuration!==void 0?t.animationDuration:1e3,this.minScale=t.minScale!==void 0?t.minScale:.1,this.maxScale=t.maxScale!==void 0?t.maxScale:14,this}xDomain(t=void 0){return t===void 0?this.xScale.domain():(this.xScale.domain(t),this)}yDomain(t=void 0){return t===void 0?this.yScale.domain():(this.yScale.domain(t),this)}xRange(t=void 0){return t===void 0?this.xScale.range():(this.xScale.range(t),this)}yRange(t=void 0){return t===void 0?this.yScale.range():(this.yScale.range(t),this)}xDSpan(){return this._xDomain[1]-this._xDomain[0]}yDSpan(){return this._yDomain[1]-this._yDomain[0]}xRSpan(){return this._xRange[1]-this._xRange[0]}yRSpan(){return this._yRange[1]-this._yRange[0]}makeSquareAspect(){let t=this.xRSpan()/this.xDSpan(),e=this.yRSpan()/this.yDSpan();if(t<e){let i=(this._yDomain[0]+this._yDomain[1])*.5,a=this.yRSpan()/t;this.yDomain([i-a*.5,i+a*.5])}else{let i=(this._xDomain[0]+this._xDomain[1])*.5,a=this.xRSpan()/e;this.xDomain([i-a*.5,i+a*.5])}return this}onUpdate(t){return this.listeners.push(t),this}isNeutral(){return Math.abs(this._xScaleFactor.get()-1)<=.01&&Math.abs(this._yScaleFactor.get()-1)<=.01&&Math.abs(this._translateX.get())<=5&&Math.abs(this._translateY.get())<=5}advance(t=void 0){return this.timeProvider.advance(t),[this._xScaleFactor.advance(t),this._yScaleFactor.advance(t),this._translateX.advance(t),this._translateY.advance(t)].some(i=>i)?(this._updatedNoAdvance=!1,this.listeners.forEach(i=>i(this)),!0):(this._updatedNoAdvance||(this.listeners.forEach(i=>i(this)),this._updatedNoAdvance=!0),!1)}scaleBy(t,e=null){this.unfollow();let i=this._translateX.get(),a=this._translateY.get(),s=this._xScaleFactor.get(),n=this._yScaleFactor.get();e?e=[(e[0]-i)/s,(e[1]-a)/n]:e=[(this.xRange[0]+this.xRange[1])*.5,(this.yRange[0]+this.yRange[1])*.5];let o=typeof t=="number"?t:t[0],l=typeof t=="number"?t:t[1],h=s+o;return h<=this.maxScale&&h>=this.minScale&&(this._xScaleFactor.set(h),this._translateX.set(i-o*e[0])),h=n+l,h<=this.maxScale&&h>=this.minScale&&(this._yScaleFactor.set(h),this._translateY.set(a-l*e[1])),this}translateBy(t,e){return this.unfollow(),this._translateX.set(this._translateX.get()+t),this._translateY.set(this._translateY.get()+e),this}transform(t=void 0,e=!1){if(t!==void 0){if(this.unfollow(),e){let i=a=>new B(Z(a),this.animationDuration,G);t.kx!==void 0?this._xScaleFactor.animate(i(t.kx)):t.k!==void 0&&this._xScaleFactor.animate(i(t.k)),t.ky!==void 0?this._yScaleFactor.animate(i(t.ky)):t.k!==void 0&&this._yScaleFactor.animate(i(t.k)),t.x!==void 0&&this._translateX.animate(i(t.x)),t.y!==void 0&&this._translateY.animate(i(t.y))}else t.kx!==void 0?this._xScaleFactor.set(t.kx):t.k!==void 0&&this._xScaleFactor.set(t.k),t.ky!==void 0?this._yScaleFactor.set(t.ky):t.k!==void 0&&this._yScaleFactor.set(t.k),t.x!==void 0&&this._translateX.set(t.x),t.y!==void 0&&this._translateY.set(t.y);return this}else{let i=this._xScaleFactor.last(),a=this._yScaleFactor.last();return{k:(i+a)*.5,kx:i,ky:a,x:this._translateX.last(),y:this._translateY.last()}}}reset(t=!1){return this.transform({k:1,x:0,y:0},t)}zoomTo(t,e=!0){return this.transform(t.transform(this),e)}follow(t,e=!0){if(this.controller=t,this._xScaleFactor.set(()=>{let i=this.controller.transform(this);return i.kx||i.k}),this._yScaleFactor.set(()=>{let i=this.controller.transform(this);return i.ky||i.k}),this._translateX.set(()=>this.controller.transform(this).x),this._translateY.set(()=>this.controller.transform(this).y),e){let i=a=>new B(Z(a),this.animationDuration,G);this._xScaleFactor.animate(i(this._xScaleFactor.data())),this._yScaleFactor.animate(i(this._yScaleFactor.data())),this._translateX.animate(i(this._translateX.data())),this._translateY.animate(i(this._translateY.data()))}return this}unfollow(){return this.controller!=null&&(this._xScaleFactor.set(this._xScaleFactor.get()),this._yScaleFactor.set(this._yScaleFactor.get()),this._translateX.set(this._translateX.get()),this._translateY.set(this._translateY.get())),this.controller=null,this}}class Jt{constructor(t,e={}){this.lastCompute=void 0,this.marks=t,this.centerMark=e.centerMark!==void 0?e.centerMark:void 0,this.centerMark&&!this.marks.includes(this.centerMark)&&(this.marks=[...this.marks,this.centerMark]),this.xAttr=e.xAttr!==void 0?e.xAttr:"x",this.yAttr=e.yAttr!==void 0?e.yAttr:"y",this.padding=e.padding!==void 0?e.padding:20,this.transformCoordinates=e.transformCoordinates!==void 0?e.transformCoordinates:!1}transform(t){if(this.lastCompute&&this.lastCompute.scales===t&&this.lastCompute.time==t.timeProvider())return this.lastCompute.result;let e=this.marks.map(v=>this._getMarkLocation(v)),i,a,s,n,o=this.centerMark!==void 0?this._getMarkLocation(this.centerMark):null,l=t.transform(),{x:h,y:u}=ea(e);if(o){let v=Math.max(h[1]-o.x,o.x-h[0]),w=Math.max(u[1]-o.y,o.y-u[0]);h=[o.x-v,o.x+v],u=[o.y-w,o.y+w]}let c,d;Math.abs(h[1]-h[0])>0?c=(Math.abs(t.xRSpan())-this.padding*2)/(h[1]-h[0])/(Math.abs(t.xRSpan())/Math.abs(t.xDSpan())):c=l.kx,Math.abs(u[1]-u[0])>0?d=(Math.abs(t.yRSpan())-this.padding*2)/(u[1]-u[0])/(Math.abs(t.yRSpan())/Math.abs(t.yDSpan())):d=l.ky;let m=l.ky/l.kx;c=Math.min(c,t.maxScale),d=Math.min(d,t.maxScale),d<c*m?(s=d/m,n=d):(s=c,n=c*m),i=(h[0]+h[1])*.5,a=(u[0]+u[1])*.5,i=(i-t.xDomain()[0])*t.xRSpan()/t.xDSpan()+t.xRange()[0],a=(a-t.yDomain()[0])*t.yRSpan()/t.yDSpan()+t.yRange()[0];let p=-i*s+(t.xRange()[0]+t.xRange()[1])*.5,b=-a*n+(t.yRange()[0]+t.yRange()[1])*.5,y={kx:s,ky:n,x:p,y:b};return this.lastCompute={scales:t,time:t.timeProvider(),result:y},y}_getMarkLocation(t){return{x:t.attr(this.xAttr,this.transformCoordinates),y:t.attr(this.yAttr,this.transformCoordinates)}}}function la(r,t={}){return new Jt([r],{centerMark:r,...t})}function ha(r,t={}){return new Jt(r,{...t})}class ua{constructor(t={}){this.markCollections=[],this._positionMap=null,this._binSizes=null,this._extents=null,this._numBins=null,this._numMarks=null,this._avgMarksPerBin=null,this._coordinateAttributes=t.coordinateAttributes??["x","y"],this._transformCoordinates=t.transformCoordinates??!0,this._avgMarksPerBin=t.marksPerBin??null}add(t){return this.markCollections.push(t),this}remove(t){let e=this.markCollections.indexOf(t);return e<0&&console.error("Tried to remove mark collection which does not exist:",t),this.markCollections.splice(e,1),this}invalidate(){return this._positionMap=null,this._binSizes=null,this._extents=null,this._numBins=null,this._numMarks=null,this}compute(){return console.log("computing interaction map"),this._extents=new Array(this._coordinateAttributes.length).fill([1e12,-1e12]),this._numMarks=0,this._forEachMark(t=>{this._coordinateAttributes.forEach((e,i)=>{let a=t.attr(e,this._transformCoordinates);a<this._extents[i][0]&&(this._extents[i][0]=a),a>this._extents[i][1]&&(this._extents[i][1]=a)}),this._numMarks+=1}),this._numMarks==0?this:(this._numBins=Math.round(this._numMarks/(this._avgMarksPerBin??Math.min(Math.max(1,this._numMarks/100),10))),this._binSizes=this._extents.map(t=>Math.ceil((t[1]-t[0])/this._numBins)),this._positionMap=new Map,this._forEachMark(t=>{let e=this._coordinateAttributes.map(a=>t.attr(a,this._transformCoordinates)),i=this._getPositionID(e);this._positionMap.has(i)?this._positionMap.get(i).push(t):this._positionMap.set(i,[t])}),this)}_forEachMark(t){this.markCollections.forEach(e=>{if(e instanceof Wt)e.forEach(t);else if(e instanceof Gt)t(e);else if(Array.isArray(e))e.forEach(t);else if(typeof e=="function"){let i=e();i instanceof Gt?t(i):i.forEach(t)}})}_getPositionID(t){return(this._numBins===null||!this._extents||!this._binSizes)&&console.error("Cannot hash position without computing first"),t.length!=this._coordinateAttributes.length&&console.error(`Need exactly ${this._coordinateAttributes.length} coordinates, got ${t.length}`),t.reduce((e,i,a)=>e*this._numBins+Math.floor((i-this._extents[a][0])/this._binSizes[a]),0)}marksNear(t,e,i=!0){if(this._positionMap||this.compute(),this._numMarks==0)return[];let a=this._recursiveBinWalk(t,e);return i?a.map(n=>{let o=this._coordinateAttributes.map(l=>n.attr(l,this._transformCoordinates));return[n,Math.sqrt(o.reduce((l,h,u)=>l+(h-t[u])*(h-t[u]),0))]}).filter(([n,o])=>o<=e).map(([n,o])=>n):a}_recursiveBinWalk(t,e,i=[]){let a=i.length;if(a==t.length)return this._positionMap.get(this._getPositionID(i))??[];let s=Math.ceil(e/this._binSizes[a]),n=new Array(s*2+1).fill(0).map((l,h)=>(h-s)*this._binSizes[a]+t[a]),o=[];return n.forEach(l=>{o=[...o,...this._recursiveBinWalk(t,s,[...i,l])]}),o}}exports.Animator=B;exports.Attribute=H;exports.LazyTicker=sa;exports.Mark=Gt;exports.MarkFollower=Jt;exports.MarkRenderGroup=Wt;exports.PositionMap=ua;exports.PreloadableAnimator=xt;exports.Scales=oa;exports.StageManager=na;exports.StagingAction=dr;exports.StagingState=cr;exports.Ticker=aa;exports.autoMixingFunction=Tt;exports.basicAnimationTo=Qi;exports.centerOn=la;exports.colorMixingFunction=hr;exports.createRenderGroup=ra;exports.curveEaseInOut=G;exports.curveLinear=Vt;exports.interpolateAlongPath=Wi;exports.interpolateTo=Z;exports.interpolateToFunction=Vi;exports.markBox=ha;exports.numericalMixingFunction=lr;

},{}]},{},[1]);
